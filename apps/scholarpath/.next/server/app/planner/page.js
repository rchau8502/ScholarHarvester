(()=>{var e={};e.id=136,e.ids=[136],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},852:e=>{"use strict";e.exports=require("async_hooks")},8382:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>d,routeModule:()=>u,tree:()=>c}),r(7749),r(4486),r(6042);var s=r(4285),a=r(2875),n=r(8190),l=r.n(n),i=r(3289),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);r.d(t,o);let c=["",{children:["planner",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,7749)),"/Users/richc/Desktop/ScholarHarvester/apps/scholarpath/app/planner/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,4486)),"/Users/richc/Desktop/ScholarHarvester/apps/scholarpath/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,6042,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/richc/Desktop/ScholarHarvester/apps/scholarpath/app/planner/page.tsx"],m="/planner/page",p={require:r,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/planner/page",pathname:"/planner",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},2996:()=>{},1239:(e,t,r)=>{Promise.resolve().then(r.bind(r,4871))},3269:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,5157,23)),Promise.resolve().then(r.t.bind(r,2144,23)),Promise.resolve().then(r.t.bind(r,3582,23)),Promise.resolve().then(r.t.bind(r,9587,23)),Promise.resolve().then(r.t.bind(r,5329,23)),Promise.resolve().then(r.t.bind(r,599,23))},4871:(e,t,r)=>{"use strict";r.d(t,{PlannerView:()=>c});var s=r(7908),a=r(2178),n=r(2035),l=r(536);function i({open:e,onClose:t,metrics:r,provenance:n}){let l=(0,a.useMemo)(()=>0===r.length?null:r.reduce((e,t)=>Math.min(e,t.metric_year),r[0].metric_year),[r]),i=null!==l&&l<new Date().getFullYear()-3;return s.jsx("div",{className:`fixed inset-0 z-50 bg-black/40 transition-opacity ${e?"opacity-100":"pointer-events-none opacity-0"}`,role:"dialog","aria-modal":"true",children:(0,s.jsxs)("div",{className:`absolute right-0 top-0 h-full w-full max-w-xl transform bg-white p-6 shadow-xl transition-transform ${e?"translate-x-0":"translate-x-full"}`,children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-xl font-semibold text-primary",children:"Evidence Drawer"}),s.jsx("button",{onClick:t,className:"rounded border border-slate-300 px-3 py-1 text-sm",children:"Close"})]}),i&&s.jsx("div",{className:"mt-4 rounded bg-yellow-100 p-3 text-sm text-yellow-900",children:"Some evidence is older than three years. Verify with the campus before relying on it."}),s.jsx("div",{className:"mt-4 space-y-3 overflow-y-auto text-sm",children:r.map(e=>(0,s.jsxs)("div",{className:"rounded border border-slate-200 p-3",children:[(0,s.jsxs)("div",{className:"font-semibold text-slate-700",children:[e.metric_key," \xb7 ",e.metric_year]}),(0,s.jsxs)("div",{className:"text-slate-600",children:["Value: ",e.value_float??e.value_text??"N/A"]}),(0,s.jsxs)("div",{className:"mt-2 text-xs text-slate-500",children:["Source: ",s.jsx("a",{className:"text-primary underline",href:e.citation_url,target:"_blank",rel:"noreferrer",children:e.citation_title})]})]},`${e.metric_key}-${e.metric_year}`))}),(0,s.jsxs)("div",{className:"mt-6",children:[s.jsx("h3",{className:"text-sm font-semibold text-slate-500",children:"Citations"}),s.jsx("ul",{className:"mt-2 space-y-2 text-xs text-slate-500",children:n.map(e=>(0,s.jsxs)("li",{children:[s.jsx("span",{className:"font-semibold text-slate-600",children:e.metric_key})," — ",e.citation_title," (",e.publication_year,") \xb7"," ",s.jsx("a",{className:"text-primary underline",href:e.url,target:"_blank",rel:"noreferrer",children:e.publisher})," ","– ",e.interpretation_note]},`${e.metric_key}-${e.publication_year}`))})]})]})})}let o=["gpa_p25","gpa_p50","gpa_p75"];function c(){let{data:e}=(0,l.w)("campuses",()=>(0,n.Au)()),[t,r]=(0,a.useState)(),[c,m]=(0,a.useState)(),{data:p}=(0,l.w)(t?`profile:${t}`:null,()=>(0,n.gy)(t),[t]),{data:u}=(0,l.w)("provenance",()=>(0,n.oV)()),[x,h]=(0,a.useState)(!1),v=p?.metrics??[],f=(0,a.useMemo)(()=>Array.from(new Set(v.map(e=>e.metric_year))).sort((e,t)=>t-e),[v]),y=v.filter(e=>!c||e.metric_year===c),b=o.map(e=>y.find(t=>t.metric_key===e)),g=y.find(e=>"admit_rate"===e.metric_key);return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium",children:"Campus"}),s.jsx("select",{className:"rounded border border-slate-300 px-3 py-2",value:t,onChange:e=>r(e.target.value),children:e?.map(e=>s.jsx("option",{value:e.slug,children:e.name},e.slug))})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center",children:[s.jsx("span",{className:"text-sm font-medium",children:"Year"}),s.jsx("div",{className:"flex gap-2",children:f.map(e=>s.jsx("button",{className:`rounded-full border px-3 py-1 text-sm ${c===e?"bg-primary text-white":"border-slate-300 text-slate-600"}`,onClick:()=>m(e),children:e},e))})]}),s.jsx("button",{className:"ml-auto rounded bg-accent px-4 py-2 text-white",onClick:()=>h(!0),children:"Open Evidence"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-4",children:[s.jsx(d,{title:"Admit Rate",value:g?.value_float?`${Math.round(100*g.value_float)}%`:"N/A"}),b.map((e,t)=>s.jsx(d,{title:o[t].toUpperCase(),value:e?.value_float?.toFixed(2)??"N/A"},o[t]))]}),s.jsx(i,{open:x,onClose:()=>h(!1),metrics:y,provenance:u??[]})]})}function d({title:e,value:t}){return(0,s.jsxs)("div",{className:"rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:[s.jsx("p",{className:"text-sm font-medium text-slate-500",children:e}),s.jsx("p",{className:"text-2xl font-semibold text-primary",children:t})]})}},2035:(e,t,r)=>{"use strict";r.d(t,{Au:()=>n,Kt:()=>l,gy:()=>i,oV:()=>o});let s=process.env.NEXT_PUBLIC_API_URL||"http://localhost:8080";async function a(e){let t=await fetch(`${s}${e}`,{cache:"no-store"});if(!t.ok)throw Error(`Failed to fetch ${e}`);return t.json()}async function n(){return a("/v1/campuses")}async function l(e){let t=new URLSearchParams;e.campus&&t.set("campus",e.campus),e.metric_key&&t.set("metric_key",e.metric_key);let r=t.toString();return a(`/v1/metrics${r?`?${r}`:""}`)}async function i(e){return a(`/v1/profile/${e}`)}async function o(){return a("/v1/provenance")}},536:(e,t,r)=>{"use strict";r.d(t,{w:()=>a});var s=r(2178);function a(e,t,r=[]){let[a,n]=(0,s.useState)({loading:!!e});return a}},4486:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n,metadata:()=>a});var s=r(9807);r(7272);let a={title:"ScholarPath Planner",description:"Evidence-based California college planning"};function n({children:e}){return s.jsx("html",{lang:"en",children:(0,s.jsxs)("body",{children:[s.jsx("div",{className:"banner",children:"Not affiliated with UC/CSU/ASSIST. Year/term matters."}),s.jsx("main",{className:"mx-auto max-w-6xl px-6 py-8 space-y-6",children:e})]})})}},7749:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i,dynamic:()=>l});var s=r(9807),a=r(561);let n=(0,r(6592).createProxy)(String.raw`/Users/richc/Desktop/ScholarHarvester/apps/scholarpath/components/PlannerView.tsx#PlannerView`),l="force-dynamic";function i(){return s.jsx(a.Suspense,{fallback:s.jsx("div",{children:"Loading planner..."}),children:s.jsx(n,{})})}},7272:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[743],()=>r(8382));module.exports=s})();